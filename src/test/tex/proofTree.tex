\documentclass[12pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{makeidx}
\usepackage{graphicx}
\usepackage{lmodern}
\usepackage{color}
\usepackage{bussproofs}
\usepackage[left=2cm,right=2cm,top=2cm,bottom=2cm]{geometry}

\begin{document}

\section{Rules}

\begin{enumerate}

\item
\begin{prooftree}
\AxiomC{$\Gamma (x) = T$} \RightLabel{\scriptsize var} \UnaryInfC{$\Gamma \vdash x : T$}
\end{prooftree}
\item
\begin{prooftree}
\AxiomC{$\Gamma \vdash x : T_1 \rightarrow T_2$} 
\AxiomC{$\Gamma \vdash y : T_1$}
 \RightLabel{\scriptsize app} \BinaryInfC{$\Gamma \vdash (x y)\color{blue}[T_1] \color{black} : T_2$}
\end{prooftree}
\item
\begin{prooftree}
\AxiomC{$\Gamma, x:T_1 \vdash t : T_2$} 
 \RightLabel{\scriptsize $\lambda$} \UnaryInfC{$\Gamma \vdash \lambda x .t:  T_1 \rightarrow T_2$}
\end{prooftree}

\item 

\begin{prooftree}
\AxiomC{$\Gamma \vdash t : T_1$} 
\AxiomC{$T_1 <: T_2$}
 \RightLabel{\scriptsize subsumption} \BinaryInfC{$\Gamma \vdash t: T_2$}
\end{prooftree}

\item 

\begin{prooftree}
\AxiomC{} 
 \RightLabel{\scriptsize reflexive} \BinaryInfC{$T <: T$}
\end{prooftree}
\item 

\begin{prooftree}
\AxiomC{$SubBase(b_1, b_2$} 
 \RightLabel{\scriptsize subBase} \BinaryInfC{$b_1 <: b_2$}
\end{prooftree}
\item 

\begin{prooftree}
\AxiomC{$T'_1 <: T_1$} 
\AxiomC{$T_2 <: T'_2$}
 \RightLabel{\scriptsize arrow} \BinaryInfC{$T_1 \rightarrow T_2 <: T2_1 \rightarrow T'_2$}
\end{prooftree}

\item 

\begin{prooftree}
\AxiomC{$T'_1 <: T_1$} 
\AxiomC{$T_2 <: T'_2$}
 \RightLabel{\scriptsize subsumption} \BinaryInfC{$T_1 \rightarrow T_2 <: T2_1 \rightarrow T'_2$}
\end{prooftree}



\end{enumerate}
\section{Variable terms}

\subsection{Valid}

\begin{prooftree}
\AxiomC{} \RightLabel{\scriptsize var} \UnaryInfC{$x: T \vdash x : T$}
\end{prooftree}

\subsection{Invalid}

\begin{prooftree}
\AxiomC{} \RightLabel{\color{red} \scriptsize invalid var} \UnaryInfC{$\cdot \vdash x : T$} \color{black} 
\end{prooftree}

\section{Lambda \& application terms}

\begin{prooftree}
\AxiomC{} \RightLabel{var} \UnaryInfC{$x: (T1 \rightarrow T2), y: T1 \vdash x : (T1 \rightarrow T2)$}
\AxiomC{} \RightLabel{var} \UnaryInfC{$x: (T1 \rightarrow T2), y: T1 \vdash y : T1$}
\RightLabel{app} \BinaryInfC{$x: (T1 \rightarrow T2), y: T1 \vdash (x\;y) [T1] : T2$}
\RightLabel{$\lambda$}\UnaryInfC{$x: (T1 \rightarrow T2) \vdash  \lambda y. (x\;y) [T1] : (T1 \rightarrow T2)$}
\RightLabel{$\lambda$}\UnaryInfC{$\cdot \vdash  \lambda x.  \lambda y. (x\;y) [T1] : ((T1 \rightarrow T2) \rightarrow (T1 \rightarrow T2))$}
\end{prooftree}


\section{Direct Subtyping}

\subsection{Valid}
\begin{prooftree}
\AxiomC{} \RightLabel{\scriptsize var} \UnaryInfC{$x: bool \vdash x : bool$}
\AxiomC{\scriptsize SubBase($bool,int)$} \RightLabel{\scriptsize subBase} \UnaryInfC{$bool <: int$}
\RightLabel{\scriptsize subsumption} \BinaryInfC{$x: bool \vdash x : int$}
\end{prooftree}

\subsection{Invalid}

\begin{prooftree}
\AxiomC{} \RightLabel{\scriptsize var} \UnaryInfC{$x: int \vdash x : int$}
\AxiomC{\color{red} $\perp$ \color{black}} \RightLabel{\scriptsize \color{red} invalid \color{black}} \UnaryInfC{\color{red} $int <: bool$ \color{black}}
\RightLabel{\scriptsize subsumption} \BinaryInfC{$x: int \vdash x : bool$}
\end{prooftree}


\section{Transitive Subtyping}

\begin{prooftree}
\AxiomC{} \RightLabel{\scriptsize var} \UnaryInfC{$x: bool \vdash x : bool$}
\AxiomC{\scriptsize SubBase($bool,int)$} \RightLabel{\scriptsize subBase} \UnaryInfC{$bool <: int$}
\AxiomC{\scriptsize SubBase($int,double)$} \RightLabel{\scriptsize subBase} \UnaryInfC{$int <: double$}
\RightLabel{\scriptsize transitive} \BinaryInfC{$bool <: double$}
\RightLabel{\scriptsize subsumption} \BinaryInfC{$x: bool \vdash x : double$}
\end{prooftree}

\begin{prooftree}
\AxiomC{} \RightLabel{\scriptsize var} \UnaryInfC{$x: bool \vdash x : bool$}
\AxiomC{\scriptsize SubBase($bool,int)$} \RightLabel{\scriptsize subBase} \UnaryInfC{$bool <: int$}
\AxiomC{\scriptsize SubBase($int,quotient)$} \RightLabel{\scriptsize subBase} \UnaryInfC{$int <: quotient$}
\RightLabel{\scriptsize transitive} \BinaryInfC{$bool <: quotient$}
\AxiomC{\scriptsize SubBase($quotient,double)$} \RightLabel{\scriptsize subBase} \UnaryInfC{$quotient <: double$}
\RightLabel{\scriptsize transitive} \BinaryInfC{$bool <: double$}
\RightLabel{\scriptsize subsumption} \BinaryInfC{$x: bool \vdash x : double$}
\end{prooftree}

\section{Arrow Types}

\subsection{Valid}
\begin{prooftree}
\AxiomC{} \RightLabel{\scriptsize var} \UnaryInfC{$x: (int \rightarrow bool) \vdash x : (int \rightarrow bool)$}
\AxiomC{\scriptsize SubBase($bool,int)$} \RightLabel{\scriptsize subBase} \UnaryInfC{$bool <: int$}
\AxiomC{\scriptsize SubBase($bool,int)$} \RightLabel{\scriptsize subBase} \UnaryInfC{$bool <: int$}
\RightLabel{\scriptsize arrow} \BinaryInfC{$(int \rightarrow bool) <: (bool \rightarrow int)$}
\RightLabel{\scriptsize subsumption} \BinaryInfC{$x: (int \rightarrow bool) \vdash x : (bool \rightarrow int)$}
\end{prooftree}

\subsubsection{Reflexive}
\begin{prooftree}
\AxiomC{} \RightLabel{\scriptsize var} \UnaryInfC{$x: (int \rightarrow bool) \vdash x : (int \rightarrow bool)$}
\AxiomC{} \RightLabel{\scriptsize reflexive} \UnaryInfC{$int <: int$}
\AxiomC{\scriptsize SubBase($bool,int)$} \RightLabel{\scriptsize subBase} \UnaryInfC{$bool <: int$}
\RightLabel{\scriptsize arrow} \BinaryInfC{$(int \rightarrow bool) <: (int \rightarrow int)$}
\RightLabel{\scriptsize subsumption} \BinaryInfC{$x: (int \rightarrow bool) \vdash x : (int \rightarrow int)$}
\end{prooftree}

\subsubsection{Nested}

\tiny
\begin{prooftree}
\AxiomC{} \RightLabel{\scriptsize var} \UnaryInfC{$x: (int \rightarrow T), y: bool \vdash x : (int \rightarrow T)$}
\AxiomC{\scriptsize SubBase($bool,int)$} \RightLabel{\scriptsize subBase} \UnaryInfC{$bool <: int$}
\AxiomC{} \RightLabel{\scriptsize reflexive} \UnaryInfC{$T <: T$}
\RightLabel{\scriptsize arrow} \BinaryInfC{$(int \rightarrow T) <: (bool \rightarrow T)$}
\RightLabel{\scriptsize subsumption} \BinaryInfC{$x: (int \rightarrow T), y: bool \vdash x : (bool \rightarrow T)$}
\AxiomC{} \RightLabel{\scriptsize var} \UnaryInfC{$x: (int \rightarrow T), y: bool \vdash y : bool$}
\RightLabel{\scriptsize app} \BinaryInfC{$x: (int \rightarrow T), y: bool \vdash (x\;y) [bool] : T$}
\RightLabel{$\lambda$}\UnaryInfC{$x: (int \rightarrow T) \vdash  \lambda y. (x\;y) [bool] : (bool \rightarrow T)$}
\RightLabel{$\lambda$}\UnaryInfC{$\cdot \vdash  \lambda x.  \lambda y. (x\;y) [bool] : ((int \rightarrow T) \rightarrow (bool \rightarrow T))$}
\end{prooftree}

\normalsize

\subsection{Invalid}

\begin{prooftree}
\AxiomC{} \RightLabel{\scriptsize var} \UnaryInfC{$x: (bool \rightarrow bool) \vdash x : (bool \rightarrow bool)$}
\AxiomC{\color{red} $\perp$ \color{black}} \RightLabel{\scriptsize \color{red} invalid \color{black}} \UnaryInfC{\color{red} $int <: bool$ \color{black}}
\AxiomC{\scriptsize SubBase($bool,int)$} \RightLabel{\scriptsize subBase} \UnaryInfC{$bool <: int$}
\RightLabel{\scriptsize arrow} \BinaryInfC{$(bool \rightarrow bool) <: (int \rightarrow int)$}
\RightLabel{\scriptsize subsumption} \BinaryInfC{$x: (bool \rightarrow bool) \vdash x : (int \rightarrow int)$}
\end{prooftree}

\tiny

\begin{prooftree}
\AxiomC{} \RightLabel{\scriptsize var} \UnaryInfC{$x: (bool \rightarrow T), y: bool \vdash x : (bool \rightarrow T)$}
\AxiomC{\color{red} $\perp$ \color{black}} \RightLabel{\scriptsize \color{red} invalid \color{black}} \UnaryInfC{\color{red} $int <: bool$ \color{black}}
\AxiomC{} \RightLabel{\scriptsize reflexive} \UnaryInfC{$T <: T$}
\RightLabel{\scriptsize arrow} \BinaryInfC{$(bool \rightarrow T) <: (int \rightarrow T)$}
\RightLabel{\scriptsize subsumption} \BinaryInfC{$x: (bool \rightarrow T), y: bool \vdash x : (int \rightarrow T)$}
\AxiomC{} \RightLabel{\scriptsize var} \UnaryInfC{$x: (bool \rightarrow T), y: bool \vdash y : bool$}
\AxiomC{\scriptsize SubBase($bool,int)$} \RightLabel{\scriptsize subBase} \UnaryInfC{$bool <: int$}
\RightLabel{\scriptsize subsumption} \BinaryInfC{$x: (bool \rightarrow T), y: bool \vdash y : int$}
\RightLabel{\scriptsize app} \BinaryInfC{$x: (bool \rightarrow T), y: bool \vdash (x\;y) [int] : T$}
\RightLabel{$\lambda$}\UnaryInfC{$x: (bool \rightarrow T) \vdash  \lambda y. (x\;y) [int] : (bool \rightarrow T)$}
\RightLabel{$\lambda$}\UnaryInfC{$\cdot \vdash  \lambda x.  \lambda y. (x\;y) [int] : ((bool \rightarrow T) \rightarrow (bool \rightarrow T))$}
\end{prooftree}

\normalsize

\section{System F}

\subsection{Variables}

\subsubsection{Valid}

\begin{prooftree}
\AxiomC{} \RightLabel{\scriptsize var} \UnaryInfC{$x: \forall X.X \vdash x : \forall X.X$}
\end{prooftree}

\begin{prooftree}
\AxiomC{} \RightLabel{\scriptsize var} \UnaryInfC{$x: \forall X.X \vdash x : \forall Y.Y$}
\end{prooftree}

\begin{prooftree}
\AxiomC{} \RightLabel{\scriptsize var} \UnaryInfC{$x: \forall X.(X \rightarrow X) \vdash x : \forall Y.(Y \rightarrow Y)$}
\end{prooftree}

$Y$ is free in the context and the type:

\begin{prooftree}
\AxiomC{} \RightLabel{\scriptsize var} \UnaryInfC{$x: \forall X.(X \rightarrow Y) \vdash x : \forall Z.(Z \rightarrow Y)$}
\end{prooftree}

\subsubsection{Invalid}

$Y$ is free in the context:

\begin{prooftree}
\AxiomC{} \RightLabel{\color{red} \scriptsize invalid var} \UnaryInfC{$x: \forall X.(X \rightarrow Y) \vdash x : \forall Y.(Y \rightarrow Y)$} \color{black} 
\end{prooftree}

$Y$ is free in the context, and $Z$ is free in the type: 

\begin{prooftree}
\AxiomC{} \RightLabel{\color{red} \scriptsize invalid var} \UnaryInfC{$x: \forall X.(X \rightarrow Y) \vdash x : \forall Y.(Y \rightarrow Z)$} \color{black} 
\end{prooftree}

\end{document}
